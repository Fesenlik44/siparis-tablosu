<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Google Sheets SipariÅŸ Tablosu</title>
</head>
<body>
  <h1>ğŸ“‹ SipariÅŸ Listesi</h1>
  <div id="liste"></div>

  <h2>â• Yeni SipariÅŸ Ekle</h2>
  <input type="text" id="isim" placeholder="Ä°sim">
  <input type="text" id="email" placeholder="E-posta">
  <button onclick="veriEkle()">Ekle</button>

  <script>
    // DoÄŸrudan Ã§alÄ±ÅŸan CORS uyumlu URL
    const sheetURL = "https://script.googleusercontent.com/macros/echo?user_content_key=AehSKLi6RuSFvs2Dp9226h3xvmvcwVzgc_y3PvHKkQedfnx1d9upqSLHKgC-SZ6LNFn0JMH1XeCTGu2N_L0g6YwC-Wn_wg-YR-cfzAl-Lru8fzSMzesf2Jew9K2r14OcbhPvXyW34Okh6EhKyXFs6xUjMvL6iJzBAxfCqIGKxwl1lQtLt1E-trQqjsH93SyUyTTncmjMNmMcWZpACF9q8oMTE-U--Tz8kKc9dxypc-6SbBl0t_e5-CIqfLFw1F7zxQ&lib=MQdXRmybjNn85eiRHlLTQcQEa5a_kG2hH";

    // Verileri listele
    fetch(sheetURL)
      .then(res => res.json())
      .then(data => {
        const liste = document.getElementById('liste');
        if (data.length === 0) {
          liste.innerHTML = "<p>Veri bulunamadÄ±.</p>";
          return;
        }

        data.slice(1).forEach(row => {
          const satir = document.createElement('p');
          satir.textContent = row.join(" | ");
          liste.appendChild(satir);
        });
      })
      .catch(err => {
        console.error("Hata:", err);
        document.getElementById('liste').innerHTML = "<p>Veri alÄ±namadÄ±.</p>";
      });

    // Yeni veri ekle
    function veriEkle() {
      const isim = document.getElementById('isim').value;
      const email = document.getElementById('email').value;

      if (!isim || !email) {
        alert("LÃ¼tfen tÃ¼m alanlarÄ± doldurun.");
        return;
      }

      fetch(sheetURL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name: isim, email: email })
      })
      .then(res => res.text())
      .then(msg => {
        alert("Ekleme baÅŸarÄ±lÄ±: " + msg);
        location.reload();
      })
      .catch(err => {
        console.error("Ekleme hatasÄ±:", err);
        alert("Veri eklenemedi.");
      });
    }
  </script>
</body>
</html>
